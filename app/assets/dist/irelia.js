import{Controller as e}from"@hotwired/stimulus";(class extends e{}).debounces=[];(class extends e{}).throttles=[];const t={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},n={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},s=(e,t={})=>{var s,a,r;const o=e,l=o.element.dataset.transitionTarget;let c;l&&(c=o[`${l}Target`]);const d=(null==t?void 0:t.element)||c||o.element;if(!(d instanceof HTMLElement||d instanceof SVGElement))return;const u=d.dataset,v=parseInt(u.leaveAfter||"")||t.leaveAfter||0,{transitioned:m,hiddenClass:g,preserveOriginalClass:h,removeToClasses:f}=Object.assign({},n,t),T=null===(s=o.enter)||void 0===s?void 0:s.bind(o),p=null===(a=o.leave)||void 0===a?void 0:a.bind(o),C=null===(r=o.toggleTransition)||void 0===r?void 0:r.bind(o);async function L(e){if(o.transitioned)return;o.transitioned=!0,T&&T(e);const n=i("enterFrom",t,u),s=i("enterActive",t,u),a=i("enterTo",t,u),r=i("leaveTo",t,u);g&&d.classList.remove(g),f||y(d,r),await A(d,n,s,a,g,h,f),v>0&&setTimeout((()=>{b(e)}),v)}async function b(e){if(!o.transitioned)return;o.transitioned=!1,p&&p(e);const n=i("leaveFrom",t,u),s=i("leaveActive",t,u),a=i("leaveTo",t,u),r=i("enterTo",t,u);f||y(d,r),await A(d,n,s,a,g,h,f),g&&d.classList.add(g)}function w(e){C&&C(e),o.transitioned?b():L()}async function A(e,t,n,s,i,a,r){const o=[];a&&(t.forEach((t=>e.classList.contains(t)&&t!==i&&o.push(t))),n.forEach((t=>e.classList.contains(t)&&t!==i&&o.push(t))),s.forEach((t=>e.classList.contains(t)&&t!==i&&o.push(t)))),E(e,t),y(e,o),E(e,n),await async function(){return new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame(e)}))}))}(),y(e,t),E(e,s),await async function(e){return new Promise((t=>{const n=1e3*Number(getComputedStyle(e).transitionDuration.split(",")[0].replace("s",""));setTimeout((()=>{t(n)}),n)}))}(e),y(e,n),r&&y(e,s),E(e,o)}function E(e,t){t.length>0&&e.classList.add(...t)}function y(e,t){t.length>0&&e.classList.remove(...t)}return o.transitioned=m,m?(g&&d.classList.remove(g),L()):(g&&d.classList.add(g),b()),Object.assign(o,{enter:L,leave:b,toggleTransition:w}),[L,b,w]};function i(e,n,s){const i=`transition${e[0].toUpperCase()}${e.substr(1)}`,a=t[e],r=n[e]||s[i]||s[a]||" ";return 0!==(o=r).length&&o.trim()?r.split(" "):[];var o}const a=class extends e{connect(){s(this,{element:this.menuTarget})}toggle(){this.toggleTransition()}hide(e){!this.element.contains(e.target)&&!this.menuTarget.classList.contains("hidden")&&this.leave()}};a.targets=["menu"];let r=a;class o extends r{}function l(e){e.register("irelia-dropdown",o)}export{l as registerIreliaControllers};
