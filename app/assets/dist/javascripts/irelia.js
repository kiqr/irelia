import{Controller as e}from"@hotwired/stimulus";(class extends e{}).debounces=[];(class extends e{}).throttles=[];const t={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},s={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},n=(e,t={})=>{var n,a,r;const o=e,l=o.element.dataset.transitionTarget;let c;l&&(c=o[`${l}Target`]);const d=(null==t?void 0:t.element)||c||o.element;if(!(d instanceof HTMLElement||d instanceof SVGElement))return;const h=d.dataset,u=parseInt(h.leaveAfter||"")||t.leaveAfter||0,{transitioned:v,hiddenClass:m,preserveOriginalClass:g,removeToClasses:f}=Object.assign({},s,t),T=null===(n=o.enter)||void 0===n?void 0:n.bind(o),p=null===(a=o.leave)||void 0===a?void 0:a.bind(o),b=null===(r=o.toggleTransition)||void 0===r?void 0:r.bind(o);async function L(e){if(o.transitioned)return;o.transitioned=!0,T&&T(e);const s=i("enterFrom",t,h),n=i("enterActive",t,h),a=i("enterTo",t,h),r=i("leaveTo",t,h);m&&d.classList.remove(m),f||E(d,r),await y(d,s,n,a,m,g,f),u>0&&setTimeout((()=>{C(e)}),u)}async function C(e){if(!o.transitioned)return;o.transitioned=!1,p&&p(e);const s=i("leaveFrom",t,h),n=i("leaveActive",t,h),a=i("leaveTo",t,h),r=i("enterTo",t,h);f||E(d,r),await y(d,s,n,a,m,g,f),m&&d.classList.add(m)}function w(e){b&&b(e),o.transitioned?C():L()}async function y(e,t,s,n,i,a,r){const o=[];a&&(t.forEach((t=>e.classList.contains(t)&&t!==i&&o.push(t))),s.forEach((t=>e.classList.contains(t)&&t!==i&&o.push(t))),n.forEach((t=>e.classList.contains(t)&&t!==i&&o.push(t)))),A(e,t),E(e,o),A(e,s),await async function(){return new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame(e)}))}))}(),E(e,t),A(e,n),await async function(e){return new Promise((t=>{const s=1e3*Number(getComputedStyle(e).transitionDuration.split(",")[0].replace("s",""));setTimeout((()=>{t(s)}),s)}))}(e),E(e,s),r&&E(e,n),A(e,o)}function A(e,t){t.length>0&&e.classList.add(...t)}function E(e,t){t.length>0&&e.classList.remove(...t)}return o.transitioned=v,v?(m&&d.classList.remove(m),L()):(m&&d.classList.add(m),C()),Object.assign(o,{enter:L,leave:C,toggleTransition:w}),[L,C,w]};function i(e,s,n){const i=`transition${e[0].toUpperCase()}${e.substr(1)}`,a=t[e],r=s[e]||n[i]||n[a]||" ";return 0!==(o=r).length&&o.trim()?r.split(" "):[];var o}const a=class extends e{connect(){n(this,{element:this.menuTarget})}toggle(){this.toggleTransition()}hide(e){!this.element.contains(e.target)&&!this.menuTarget.classList.contains("hidden")&&this.leave()}};a.targets=["menu"];let r=a;class o extends r{static values={open:Boolean};connect(){super.connect(),this.openValue&&this.enter()}}class l extends e{static targets=["container","frame","loader","background"];connect(){this.observer=new MutationObserver(this.frameMutated.bind(this)),this.observer.observe(this.frameTarget,{attributes:!0,childList:!1,characterData:!1})}disconnect(){this.observer.disconnect(),delete this.observer,this.close()}frameMutated(){this.frameTarget.hasAttribute("busy")?(this.loaderTarget.classList.remove("hidden"),this.open()):this.loaderTarget.classList.add("hidden")}open(){this.containerTarget.classList.remove("hidden")}close(e){e.preventDefault(),this.containerTarget.classList.add("hidden")}closeWithKeyboard(e){27!==e.keyCode||this.containerTarget.classList.contains("hidden")||this.close(e)}}function c(e){e.register("irelia-dropdown",o),e.register("irelia-modal",l)}export{c as registerIreliaControllers};
